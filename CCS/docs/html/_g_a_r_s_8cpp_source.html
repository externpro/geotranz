<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MSP GEOTRANS: Y:/msp/devkits/temp_geotrans/master/geotrans3.1/CCS/src/dtcc/CoordinateSystems/gars/GARS.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>Y:/msp/devkits/temp_geotrans/master/geotrans3.1/CCS/src/dtcc/CoordinateSystems/gars/GARS.cpp</h1><a href="_g_a_r_s_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// CLASSIFICATION: UNCLASSIFIED</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="comment">/***************************************************************************/</span>
<a name="l00004"></a>00004 <span class="comment">/* RSC IDENTIFIER: GARS</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * ABSTRACT</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> *    This component provides conversions from Geodetic coordinates (latitude</span>
<a name="l00009"></a>00009 <span class="comment"> *    and longitude in radians) to a GARS coordinate string.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * ERROR HANDLING</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> *    This component checks parameters for valid values.  If an invalid value</span>
<a name="l00014"></a>00014 <span class="comment"> *    is found, the error code is combined with the current error code using </span>
<a name="l00015"></a>00015 <span class="comment"> *    the bitwise or.  This combining allows multiple error codes to be</span>
<a name="l00016"></a>00016 <span class="comment"> *    returned. The possible error codes are:</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> *          GARS_NO_ERROR          : No errors occurred in function</span>
<a name="l00019"></a>00019 <span class="comment"> *          GARS_LAT_ERROR         : Latitude outside of valid range </span>
<a name="l00020"></a>00020 <span class="comment"> *                                      (-90 to 90 degrees)</span>
<a name="l00021"></a>00021 <span class="comment"> *          GARS_LON_ERROR         : Longitude outside of valid range</span>
<a name="l00022"></a>00022 <span class="comment"> *                                      (-180 to 360 degrees)</span>
<a name="l00023"></a>00023 <span class="comment"> *          GARS_STR_ERROR         : A GARS string error: string too long,</span>
<a name="l00024"></a>00024 <span class="comment"> *                                      string too short, invalid numbers/letters</span>
<a name="l00025"></a>00025 <span class="comment"> *          GARS_STR_LAT_ERROR     : The latitude part of the GARS string</span>
<a name="l00026"></a>00026 <span class="comment"> *                                     (fourth and fifth  characters) is invalid.</span>
<a name="l00027"></a>00027 <span class="comment"> *          GARS_STR_LON_ERROR     : The longitude part of the GARS string</span>
<a name="l00028"></a>00028 <span class="comment"> *                                     (first three characters) is invalid.</span>
<a name="l00029"></a>00029 <span class="comment"> *          GARS_STR_15_MIN_ERROR  : The 15 minute part of the GARS</span>
<a name="l00030"></a>00030 <span class="comment"> *                                      string is less than 1 or greater than 4.</span>
<a name="l00031"></a>00031 <span class="comment"> *          GARS_STR_5_MIN_ERROR   : The 5 minute part of the GARS</span>
<a name="l00032"></a>00032 <span class="comment"> *                                      string is less than 1 or greater than 9.</span>
<a name="l00033"></a>00033 <span class="comment"> *          GARS_PRECISION_ERROR   : The precision must be between 0 and 5 </span>
<a name="l00034"></a>00034 <span class="comment"> *                                      inclusive.</span>
<a name="l00035"></a>00035 <span class="comment"> *</span>
<a name="l00036"></a>00036 <span class="comment"> *</span>
<a name="l00037"></a>00037 <span class="comment"> * REUSE NOTES</span>
<a name="l00038"></a>00038 <span class="comment"> *</span>
<a name="l00039"></a>00039 <span class="comment"> *    GARS is intended for reuse by any application that performs a </span>
<a name="l00040"></a>00040 <span class="comment"> *    conversion between Geodetic and GARS coordinates.</span>
<a name="l00041"></a>00041 <span class="comment"> *    </span>
<a name="l00042"></a>00042 <span class="comment"> * REFERENCES</span>
<a name="l00043"></a>00043 <span class="comment"> *</span>
<a name="l00044"></a>00044 <span class="comment"> *    Further information on GARS can be found in the Reuse Manual.</span>
<a name="l00045"></a>00045 <span class="comment"> *</span>
<a name="l00046"></a>00046 <span class="comment"> *    GARS originated from : </span>
<a name="l00047"></a>00047 <span class="comment"> *                              </span>
<a name="l00048"></a>00048 <span class="comment"> *                   http://earth-info.nga.mil/GandG/coordsys/grids/gars.html           </span>
<a name="l00049"></a>00049 <span class="comment"> *                              </span>
<a name="l00050"></a>00050 <span class="comment"> *</span>
<a name="l00051"></a>00051 <span class="comment"> * LICENSES</span>
<a name="l00052"></a>00052 <span class="comment"> *</span>
<a name="l00053"></a>00053 <span class="comment"> *    None apply to this component.</span>
<a name="l00054"></a>00054 <span class="comment"> *</span>
<a name="l00055"></a>00055 <span class="comment"> * RESTRICTIONS</span>
<a name="l00056"></a>00056 <span class="comment"> *</span>
<a name="l00057"></a>00057 <span class="comment"> *    GARS has no restrictions.</span>
<a name="l00058"></a>00058 <span class="comment"> *</span>
<a name="l00059"></a>00059 <span class="comment"> * ENVIRONMENT</span>
<a name="l00060"></a>00060 <span class="comment"> *</span>
<a name="l00061"></a>00061 <span class="comment"> *    GARS was tested and certified in the following environments:</span>
<a name="l00062"></a>00062 <span class="comment"> *</span>
<a name="l00063"></a>00063 <span class="comment"> *    1. Solaris 2.5 with GCC version 2.8.1</span>
<a name="l00064"></a>00064 <span class="comment"> *    2. Windows XP with MS Visual C++ version 6</span>
<a name="l00065"></a>00065 <span class="comment"> *</span>
<a name="l00066"></a>00066 <span class="comment"> * MODIFICATIONS</span>
<a name="l00067"></a>00067 <span class="comment"> *</span>
<a name="l00068"></a>00068 <span class="comment"> *    Date              Description</span>
<a name="l00069"></a>00069 <span class="comment"> *    ----              -----------</span>
<a name="l00070"></a>00070 <span class="comment"> *    07-10-06          Original Code</span>
<a name="l00071"></a>00071 <span class="comment"> *    03-02-07          Original C++ Code</span>
<a name="l00072"></a>00072 <span class="comment"> */</span>
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="comment">/***************************************************************************/</span>
<a name="l00076"></a>00076 <span class="comment">/*</span>
<a name="l00077"></a>00077 <span class="comment"> *                               INCLUDES</span>
<a name="l00078"></a>00078 <span class="comment"> */</span>
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
<a name="l00081"></a>00081 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00082"></a>00082 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00083"></a>00083 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00084"></a>00084 <span class="preprocessor">#include &quot;<a class="code" href="_g_a_r_s_8h.html">GARS.h</a>&quot;</span>
<a name="l00085"></a>00085 <span class="preprocessor">#include &quot;<a class="code" href="_g_a_r_s_coordinates_8h.html">GARSCoordinates.h</a>&quot;</span>
<a name="l00086"></a>00086 <span class="preprocessor">#include &quot;<a class="code" href="_map_projection_coordinates_8h.html">MapProjectionCoordinates.h</a>&quot;</span>
<a name="l00087"></a>00087 <span class="preprocessor">#include &quot;<a class="code" href="_geodetic_coordinates_8h.html">GeodeticCoordinates.h</a>&quot;</span>
<a name="l00088"></a>00088 <span class="preprocessor">#include &quot;<a class="code" href="_coordinate_conversion_exception_8h.html">CoordinateConversionException.h</a>&quot;</span>
<a name="l00089"></a>00089 <span class="preprocessor">#include &quot;<a class="code" href="_error_messages_8h.html">ErrorMessages.h</a>&quot;</span>
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="comment">/*</span>
<a name="l00092"></a>00092 <span class="comment"> *  ctype.h    - Standard C character handling library</span>
<a name="l00093"></a>00093 <span class="comment"> *  stdio.h    - Standard C input/output library</span>
<a name="l00094"></a>00094 <span class="comment"> *  stdlib.h   - Standard C general utility library</span>
<a name="l00095"></a>00095 <span class="comment"> *  string.h   - Standard C string handling library</span>
<a name="l00096"></a>00096 <span class="comment"> *  GARS.h     - for prototype error checking</span>
<a name="l00097"></a>00097 <span class="comment"> *  GARSCoordinates.h   - defines gars coordinates</span>
<a name="l00098"></a>00098 <span class="comment"> *  MapProjectionCoordinates.h   - defines map projection coordinates</span>
<a name="l00099"></a>00099 <span class="comment"> *  GeodeticCoordinates.h   - defines geodetic coordinates</span>
<a name="l00100"></a>00100 <span class="comment"> *  CoordinateConversionException.h - Exception handler</span>
<a name="l00101"></a>00101 <span class="comment"> *  ErrorMessages.h  - Contains exception messages</span>
<a name="l00102"></a>00102 <span class="comment"> */</span>
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="keyword">using namespace </span>MSP::CCS;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 <span class="comment">/***************************************************************************/</span>
<a name="l00109"></a>00109 <span class="comment">/*                               DEFINES </span>
<a name="l00110"></a>00110 <span class="comment"> *</span>
<a name="l00111"></a>00111 <span class="comment"> */</span>
<a name="l00112"></a>00112 
<a name="l00113"></a><a class="code" href="_g_a_r_s_8cpp.html#a8b8aa1e593053fb8a8c8cc72ada8ef53">00113</a> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="_g_a_r_s_8cpp.html#a8b8aa1e593053fb8a8c8cc72ada8ef53">MIN_LATITUDE</a> = -90.0;    <span class="comment">/* Minimum latitude                      */</span>
<a name="l00114"></a><a class="code" href="_g_a_r_s_8cpp.html#a6b9b750d85feb47cca3e60ab22e2508b">00114</a> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="_g_a_r_s_8cpp.html#a6b9b750d85feb47cca3e60ab22e2508b">MAX_LATITUDE</a> = 90.0;     <span class="comment">/* Maximum latitude                      */</span>
<a name="l00115"></a><a class="code" href="_g_a_r_s_8cpp.html#a70505f5dedff533e17f5dea9d92ba31a">00115</a> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="_g_a_r_s_8cpp.html#a70505f5dedff533e17f5dea9d92ba31a">MIN_LONGITUDE</a> = -180.0;  <span class="comment">/* Minimum longitude                     */</span>
<a name="l00116"></a><a class="code" href="_g_a_r_s_8cpp.html#aa6259505015116cbbb94a2e73f9b5699">00116</a> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="_g_a_r_s_8cpp.html#aa6259505015116cbbb94a2e73f9b5699">MAX_LONGITUDE</a> = 360.0;   <span class="comment">/* Maximum longitude                     */</span>
<a name="l00117"></a><a class="code" href="_g_a_r_s_8cpp.html#a5e5c792059a69de684432bb2b07ac9ae">00117</a> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="_g_a_r_s_8cpp.html#a5e5c792059a69de684432bb2b07ac9ae">MIN_PER_DEG</a> = 60;        <span class="comment">/* Number of minutes per degree          */</span>
<a name="l00118"></a><a class="code" href="_g_a_r_s_8cpp.html#a550c1aea012e1bd3e6d86d519f0f9c37">00118</a> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="_g_a_r_s_8cpp.html#a550c1aea012e1bd3e6d86d519f0f9c37">GARS_MINIMUM</a> = 5;           <span class="comment">/* Minimum number of chars for GARS      */</span>
<a name="l00119"></a><a class="code" href="_g_a_r_s_8cpp.html#ae1d4b4c4a641820dc8f66e08b74f7e18">00119</a> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="_g_a_r_s_8cpp.html#ae1d4b4c4a641820dc8f66e08b74f7e18">GARS_MAXIMUM</a> = 7;           <span class="comment">/* Maximum number of chars for GARS      */</span>
<a name="l00120"></a><a class="code" href="_g_a_r_s_8cpp.html#a05c886d3840f3dbb627895e78ae2fb4e">00120</a> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="_g_a_r_s_8cpp.html#a05c886d3840f3dbb627895e78ae2fb4e">GARS_LETTERS</a> = 4;           <span class="comment">/* Number of letters in GARS string      */</span>
<a name="l00121"></a><a class="code" href="_g_a_r_s_8cpp.html#ab8b764097b0f861ad9adc095a88e6edb">00121</a> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="_g_a_r_s_8cpp.html#ab8b764097b0f861ad9adc095a88e6edb">MAX_PRECISION</a> = 5;          <span class="comment">/* Maximum precision of minutes part     */</span>
<a name="l00122"></a><a class="code" href="_g_a_r_s_8cpp.html#af892c7c4c45ed2ef9293868b85f962d6">00122</a> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="_g_a_r_s_8cpp.html#af892c7c4c45ed2ef9293868b85f962d6">LETTER_A_OFFSET</a> = 65;       <span class="comment">/* Letter A offset in character set      */</span>
<a name="l00123"></a><a class="code" href="_g_a_r_s_8cpp.html#a952eac791b596a61bba0a133a3bb439f">00123</a> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="_coordinate_conversion_service_8cpp.html#a952eac791b596a61bba0a133a3bb439f">PI</a> = 3.14159265358979323e0;     <span class="comment">/* PI                             */</span>
<a name="l00124"></a><a class="code" href="_g_a_r_s_8cpp.html#a99168053ae79aafdba6055129c5bb256">00124</a> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="_datum_library_implementation_8cpp.html#a99168053ae79aafdba6055129c5bb256">PI_OVER_180</a> = <a class="code" href="_coordinate_conversion_service_8cpp.html#a952eac791b596a61bba0a133a3bb439f">PI</a> / 180.0;
<a name="l00125"></a><a class="code" href="_g_a_r_s_8cpp.html#a8a2c5057feae448e06c579c1500e60cd">00125</a> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="_g_a_r_s_8cpp.html#a8a2c5057feae448e06c579c1500e60cd">RADIAN_TO_DEGREE</a> = 180.0e0 / <a class="code" href="_coordinate_conversion_service_8cpp.html#a952eac791b596a61bba0a133a3bb439f">PI</a>;
<a name="l00126"></a>00126 
<a name="l00127"></a>00127 <span class="comment">/* A = 0, B = 1, C = 2, D = 3, E = 4, F = 5, G = 6, H = 7                 */</span>
<a name="l00128"></a><a class="code" href="_g_a_r_s_8cpp.html#a69620a4a38aeb0b7a2f42a5a372e5cd3">00128</a> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="_g_a_r_s_8cpp.html#a69620a4a38aeb0b7a2f42a5a372e5cd3">LETTER_I</a> = 8;                <span class="comment">/* ARRAY INDEX FOR LETTER I        */</span>
<a name="l00129"></a>00129 <span class="comment">/* J = 9, K = 10, L = 11, M = 12, N = 13                                  */</span>
<a name="l00130"></a><a class="code" href="_g_a_r_s_8cpp.html#af18719d61a90a5d93e5a92179db37e78">00130</a> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="_g_a_r_s_8cpp.html#af18719d61a90a5d93e5a92179db37e78">LETTER_O</a> = 14;              <span class="comment">/* ARRAY INDEX FOR LETTER O         */</span>
<a name="l00131"></a>00131 <span class="comment">/* P = 15, Q = 16, R = 17, S = 18, T = 19, U = 20, V = 21,                */</span>
<a name="l00132"></a>00132 <span class="comment">/* W = 22, X = 23, Y = 24, Z = 25                                         */</span>
<a name="l00133"></a>00133 
<a name="l00134"></a><a class="code" href="_g_a_r_s_8cpp.html#ae4138a60787d5efe013e6e6cfb8892de">00134</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="_g_a_r_s_8cpp.html#ae4138a60787d5efe013e6e6cfb8892de">_1</a> = <span class="charliteral">&apos;1&apos;</span>;
<a name="l00135"></a><a class="code" href="_g_a_r_s_8cpp.html#a1effac125b74d6ff5f233ced9fd7d3e9">00135</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="_g_a_r_s_8cpp.html#a1effac125b74d6ff5f233ced9fd7d3e9">_2</a> = <span class="charliteral">&apos;2&apos;</span>;
<a name="l00136"></a><a class="code" href="_g_a_r_s_8cpp.html#ae077994efbced68710326beae00fc2a8">00136</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="_g_a_r_s_8cpp.html#ae077994efbced68710326beae00fc2a8">_3</a> = <span class="charliteral">&apos;3&apos;</span>;
<a name="l00137"></a><a class="code" href="_g_a_r_s_8cpp.html#adeb73c37cec3f75c23f05347c27892d1">00137</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="_g_a_r_s_8cpp.html#adeb73c37cec3f75c23f05347c27892d1">_4</a> = <span class="charliteral">&apos;4&apos;</span>;
<a name="l00138"></a><a class="code" href="_g_a_r_s_8cpp.html#a3c63916e510b8132e5f85701b72ca6c4">00138</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="_g_a_r_s_8cpp.html#a3c63916e510b8132e5f85701b72ca6c4">_5</a> = <span class="charliteral">&apos;5&apos;</span>;
<a name="l00139"></a><a class="code" href="_g_a_r_s_8cpp.html#a01f366355c9f897d3db7995c1cd2ebde">00139</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="_g_a_r_s_8cpp.html#a01f366355c9f897d3db7995c1cd2ebde">_6</a> = <span class="charliteral">&apos;6&apos;</span>;
<a name="l00140"></a><a class="code" href="_g_a_r_s_8cpp.html#aa78fc0e444206c5b9e27bc3a3816cd29">00140</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="_g_a_r_s_8cpp.html#aa78fc0e444206c5b9e27bc3a3816cd29">_7</a> = <span class="charliteral">&apos;7&apos;</span>;
<a name="l00141"></a><a class="code" href="_g_a_r_s_8cpp.html#a858d1f5b03daab914d4f197d34443b55">00141</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="_g_a_r_s_8cpp.html#a858d1f5b03daab914d4f197d34443b55">_8</a> = <span class="charliteral">&apos;8&apos;</span>;
<a name="l00142"></a><a class="code" href="_g_a_r_s_8cpp.html#ab7ad91f8bcde6b3499ece302740b41c9">00142</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="_g_a_r_s_8cpp.html#ab7ad91f8bcde6b3499ece302740b41c9">_9</a> = <span class="charliteral">&apos;9&apos;</span>;
<a name="l00143"></a>00143 
<a name="l00144"></a>00144 
<a name="l00145"></a>00145 <span class="comment">/************************************************************************/</span>
<a name="l00146"></a>00146 <span class="comment">/*                              FUNCTIONS     </span>
<a name="l00147"></a>00147 <span class="comment"> *</span>
<a name="l00148"></a>00148 <span class="comment"> */</span>
<a name="l00149"></a>00149 
<a name="l00150"></a><a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html#a43f5571fbf50346ee2132ee2b08e0b5a">00150</a> GARS::GARS() :
<a name="l00151"></a>00151   <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_system.html">CoordinateSystem</a>( 0, 0 )
<a name="l00152"></a>00152 {
<a name="l00153"></a>00153 }
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 
<a name="l00156"></a><a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html#ab94b8681c463dee78ca6197a7803f8c2">00156</a> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html#a43f5571fbf50346ee2132ee2b08e0b5a">GARS::GARS</a>( <span class="keyword">const</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html">GARS</a> &amp;g )
<a name="l00157"></a>00157 {
<a name="l00158"></a>00158   <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_system.html#ab4b25504df8abc3fb23b5f03eaf6c14e">semiMajorAxis</a> = g.<a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_system.html#ab4b25504df8abc3fb23b5f03eaf6c14e">semiMajorAxis</a>;
<a name="l00159"></a>00159   <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_system.html#a103abc45b36f0bc52bd992f2d19bbfc6">flattening</a> = g.<a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_system.html#a103abc45b36f0bc52bd992f2d19bbfc6">flattening</a>;
<a name="l00160"></a>00160 }
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 
<a name="l00163"></a><a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html#a7dd6199fff288db9eedf4a3de415d11a">00163</a> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html#a7dd6199fff288db9eedf4a3de415d11a">GARS::~GARS</a>()
<a name="l00164"></a>00164 {
<a name="l00165"></a>00165 }
<a name="l00166"></a>00166 
<a name="l00167"></a>00167 
<a name="l00168"></a><a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html#a814071d0d5e3c81f3737380d3cb5e4b9">00168</a> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html">GARS</a>&amp; <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html#a814071d0d5e3c81f3737380d3cb5e4b9">GARS::operator=</a>( <span class="keyword">const</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html">GARS</a> &amp;g )
<a name="l00169"></a>00169 {
<a name="l00170"></a>00170   <span class="keywordflow">if</span>( <span class="keyword">this</span> != &amp;g )
<a name="l00171"></a>00171   {
<a name="l00172"></a>00172     <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_system.html#ab4b25504df8abc3fb23b5f03eaf6c14e">semiMajorAxis</a> = g.<a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_system.html#ab4b25504df8abc3fb23b5f03eaf6c14e">semiMajorAxis</a>;
<a name="l00173"></a>00173     <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_system.html#a103abc45b36f0bc52bd992f2d19bbfc6">flattening</a> = g.<a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_system.html#a103abc45b36f0bc52bd992f2d19bbfc6">flattening</a>;
<a name="l00174"></a>00174   }
<a name="l00175"></a>00175 
<a name="l00176"></a>00176   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00177"></a>00177 }
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 
<a name="l00180"></a><a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html#acbeb5d901d38405a6e4302213316df24">00180</a> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s_coordinates.html">MSP::CCS::GARSCoordinates</a>* <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html#acbeb5d901d38405a6e4302213316df24">GARS::convertFromGeodetic</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_geodetic_coordinates.html">MSP::CCS::GeodeticCoordinates</a>* geodeticCoordinates, <span class="keywordtype">long</span> precision )
<a name="l00181"></a>00181 {
<a name="l00182"></a>00182 <span class="comment">/*   </span>
<a name="l00183"></a>00183 <span class="comment"> *  The function convertFromGeodetic converts Geodetic (latitude and longitude in radians)</span>
<a name="l00184"></a>00184 <span class="comment"> *  coordinates to a GARS coordinate string.  Precision specifies the</span>
<a name="l00185"></a>00185 <span class="comment"> *  number of digits in the GARS string for latitude and longitude:</span>
<a name="l00186"></a>00186 <span class="comment"> *                                  0: 30 minutes (5 characters)</span>
<a name="l00187"></a>00187 <span class="comment"> *                                  1: 15 minutes (6 characters)</span>
<a name="l00188"></a>00188 <span class="comment"> *                                  2: 5 minutes (7 characters)</span>
<a name="l00189"></a>00189 <span class="comment"> *</span>
<a name="l00190"></a>00190 <span class="comment"> *    longitude   : Longitude in radians.                  (input)</span>
<a name="l00191"></a>00191 <span class="comment"> *    latitude    : Latitude in radians.                   (input)</span>
<a name="l00192"></a>00192 <span class="comment"> *    precision   : Precision specified by the user.       (input)</span>
<a name="l00193"></a>00193 <span class="comment"> *    GARSString  : GARS coordinate string.                (output)</span>
<a name="l00194"></a>00194 <span class="comment"> *</span>
<a name="l00195"></a>00195 <span class="comment"> */</span>
<a name="l00196"></a>00196 
<a name="l00197"></a>00197   <span class="keywordtype">long</span> ew_value;
<a name="l00198"></a>00198   <span class="keywordtype">long</span> letter_index[<a class="code" href="_g_a_r_s_8cpp.html#a05c886d3840f3dbb627895e78ae2fb4e">GARS_LETTERS</a> + 1];    <span class="comment">/* GARS letters                 */</span>
<a name="l00199"></a>00199   <span class="keywordtype">char</span> _15_minute_value_str[2] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00200"></a>00200   <span class="keywordtype">char</span> _5_minute_value_str[2] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00201"></a>00201   <span class="keywordtype">double</span> round_error = 5.0e-11;
<a name="l00202"></a>00202   <span class="keywordtype">char</span>* _15_minute_array[2][2] = {{<span class="stringliteral">&quot;3&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>}, {<span class="stringliteral">&quot;4&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>}};
<a name="l00203"></a>00203   <span class="keywordtype">char</span>* _5_minute_array[3][3] = {{<span class="stringliteral">&quot;7&quot;</span>, <span class="stringliteral">&quot;4&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>}, {<span class="stringliteral">&quot;8&quot;</span>, <span class="stringliteral">&quot;5&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>}, {<span class="stringliteral">&quot;9&quot;</span>, <span class="stringliteral">&quot;6&quot;</span>, <span class="stringliteral">&quot;3&quot;</span>}};
<a name="l00204"></a>00204   <span class="keywordtype">double</span> long_minutes, lat_minutes; 
<a name="l00205"></a>00205   <span class="keywordtype">double</span> long_remainder, lat_remainder; 
<a name="l00206"></a>00206   <span class="keywordtype">long</span> horiz_index_30, vert_index_30; 
<a name="l00207"></a>00207   <span class="keywordtype">long</span> horiz_index_15, vert_index_15; 
<a name="l00208"></a>00208   <span class="keywordtype">long</span> horiz_index_5, vert_index_5; 
<a name="l00209"></a>00209   <span class="keywordtype">char</span> GARSString[8];
<a name="l00210"></a>00210 
<a name="l00211"></a>00211   <span class="keywordtype">double</span> latitude = geodeticCoordinates-&gt;<a class="code" href="class_m_s_p_1_1_c_c_s_1_1_geodetic_coordinates.html#a4214a0369f1e642e1a446f35b7151108">latitude</a>() * <a class="code" href="_g_a_r_s_8cpp.html#a8a2c5057feae448e06c579c1500e60cd">RADIAN_TO_DEGREE</a>;
<a name="l00212"></a>00212   <span class="keywordtype">double</span> longitude = geodeticCoordinates-&gt;<a class="code" href="class_m_s_p_1_1_c_c_s_1_1_geodetic_coordinates.html#a81b352849684e9910b4001be3fec1b0d">longitude</a>() *  <a class="code" href="_g_a_r_s_8cpp.html#a8a2c5057feae448e06c579c1500e60cd">RADIAN_TO_DEGREE</a>;
<a name="l00213"></a>00213 
<a name="l00214"></a>00214   <span class="keywordflow">if</span> ( ( latitude &lt; <a class="code" href="_g_a_r_s_8cpp.html#a8b8aa1e593053fb8a8c8cc72ada8ef53">MIN_LATITUDE</a> ) || ( latitude &gt; <a class="code" href="_g_a_r_s_8cpp.html#a6b9b750d85feb47cca3e60ab22e2508b">MAX_LATITUDE</a> ) )
<a name="l00215"></a>00215     <span class="keywordflow">throw</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_conversion_exception.html">CoordinateConversionException</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_error_messages.html#a7b9a89219866d2577632c4a2a29f21a7">ErrorMessages::latitude</a> );
<a name="l00216"></a>00216   <span class="keywordflow">if</span> ( ( longitude &lt; <a class="code" href="_g_a_r_s_8cpp.html#a70505f5dedff533e17f5dea9d92ba31a">MIN_LONGITUDE</a> ) || ( longitude &gt; <a class="code" href="_g_a_r_s_8cpp.html#aa6259505015116cbbb94a2e73f9b5699">MAX_LONGITUDE</a> ) )
<a name="l00217"></a>00217     <span class="keywordflow">throw</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_conversion_exception.html">CoordinateConversionException</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_error_messages.html#a148e03a19b3a95cae62e48e757245d12">ErrorMessages::longitude</a> );
<a name="l00218"></a>00218   <span class="keywordflow">if</span> ( ( precision &lt; 0 ) || ( precision &gt; <a class="code" href="_g_a_r_s_8cpp.html#ab8b764097b0f861ad9adc095a88e6edb">MAX_PRECISION</a> ) )
<a name="l00219"></a>00219     <span class="keywordflow">throw</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_conversion_exception.html">CoordinateConversionException</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_error_messages.html#a18652277ce6ef87f3cd48cb97fbfaa56">ErrorMessages::precision</a> );
<a name="l00220"></a>00220 
<a name="l00221"></a>00221   <span class="comment">/* North pole is an exception, read over and down */</span>
<a name="l00222"></a>00222   <span class="keywordflow">if</span>( latitude == <a class="code" href="_g_a_r_s_8cpp.html#a6b9b750d85feb47cca3e60ab22e2508b">MAX_LATITUDE</a> )
<a name="l00223"></a>00223     latitude = 89.99999999999;
<a name="l00224"></a>00224 
<a name="l00225"></a>00225   <span class="keywordflow">if</span>( longitude &gt;= 180.0 )
<a name="l00226"></a>00226     longitude -= 360.0;
<a name="l00227"></a>00227 
<a name="l00228"></a>00228   <span class="comment">/* Convert longitude and latitude from degrees to minutes */</span> 
<a name="l00229"></a>00229   <span class="comment">/* longitude assumed in -180 &lt;= long &lt; +180 range */</span> 
<a name="l00230"></a>00230   long_minutes = ( longitude - <a class="code" href="_g_a_r_s_8cpp.html#a70505f5dedff533e17f5dea9d92ba31a">MIN_LONGITUDE</a> ) * 60.0 + round_error; 
<a name="l00231"></a>00231   lat_minutes = ( latitude - <a class="code" href="_g_a_r_s_8cpp.html#a8b8aa1e593053fb8a8c8cc72ada8ef53">MIN_LATITUDE</a> ) * 60.0 + round_error; 
<a name="l00232"></a>00232   <span class="comment">/* now we have a positive number of minutes */</span> 
<a name="l00233"></a>00233 
<a name="l00234"></a>00234   <span class="comment">/* Find 30-min cell indices 0-719 and 0-359 */</span> 
<a name="l00235"></a>00235   horiz_index_30 = ( long )( long_minutes / 30.0 ); 
<a name="l00236"></a>00236   vert_index_30 = ( long )( lat_minutes / 30.0 );
<a name="l00237"></a>00237 
<a name="l00238"></a>00238   <span class="comment">/* Compute remainders 0 &lt;= x &lt; 30.0 */</span> 
<a name="l00239"></a>00239   long_remainder = long_minutes - ( horiz_index_30 ) * 30.0; 
<a name="l00240"></a>00240   lat_remainder = lat_minutes - ( vert_index_30 ) * 30.0; 
<a name="l00241"></a>00241 
<a name="l00242"></a>00242   <span class="comment">/* Find 15-min cell indices 0 or 1 */</span> 
<a name="l00243"></a>00243   horiz_index_15 = ( long )( long_remainder / 15.0 ); 
<a name="l00244"></a>00244   vert_index_15 = ( long )( lat_remainder / 15.0 ); 
<a name="l00245"></a>00245 
<a name="l00246"></a>00246   <span class="comment">/* Compute remainders 0 &lt;= x &lt; 15.0 */</span> 
<a name="l00247"></a>00247   long_remainder = long_remainder - ( horiz_index_15 ) * 15.0; 
<a name="l00248"></a>00248   lat_remainder = lat_remainder - ( vert_index_15 ) * 15.0; 
<a name="l00249"></a>00249 
<a name="l00250"></a>00250   <span class="comment">/* Find 5-min cell indices 0, 1, or 2 */</span> 
<a name="l00251"></a>00251   horiz_index_5 = ( long )( long_remainder / 5.0 ); 
<a name="l00252"></a>00252   vert_index_5 = ( long )( lat_remainder / 5.0 );
<a name="l00253"></a>00253 
<a name="l00254"></a>00254   <span class="comment">/* Calculate 30 minute east/west value, 1-720 */</span>
<a name="l00255"></a>00255   ew_value = horiz_index_30 + 1;
<a name="l00256"></a>00256 
<a name="l00257"></a>00257   <span class="comment">/* Calculate 30 minute north/south first letter, A-Q */</span>
<a name="l00258"></a>00258   letter_index[0] = ( long )( vert_index_30 / 24.0 );
<a name="l00259"></a>00259 
<a name="l00260"></a>00260   <span class="comment">/* Calculate 30 minute north/south second letter, A-Z */</span>
<a name="l00261"></a>00261   letter_index[1] = ( long )( vert_index_30 - letter_index[0] * 24.0 );
<a name="l00262"></a>00262 
<a name="l00263"></a>00263   <span class="comment">/* Letters I and O are invalid, so skip them */</span>
<a name="l00264"></a>00264   <span class="keywordflow">if</span>( letter_index[0] &gt;= <a class="code" href="_g_a_r_s_8cpp.html#a69620a4a38aeb0b7a2f42a5a372e5cd3">LETTER_I</a> )
<a name="l00265"></a>00265     letter_index[0]++;
<a name="l00266"></a>00266   <span class="keywordflow">if</span>( letter_index[0] &gt;= <a class="code" href="_g_a_r_s_8cpp.html#af18719d61a90a5d93e5a92179db37e78">LETTER_O</a> )
<a name="l00267"></a>00267     letter_index[0] ++;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269   <span class="keywordflow">if</span>( letter_index[1] &gt;= <a class="code" href="_g_a_r_s_8cpp.html#a69620a4a38aeb0b7a2f42a5a372e5cd3">LETTER_I</a> )
<a name="l00270"></a>00270     letter_index[1]++;
<a name="l00271"></a>00271   <span class="keywordflow">if</span>( letter_index[1] &gt;= <a class="code" href="_g_a_r_s_8cpp.html#af18719d61a90a5d93e5a92179db37e78">LETTER_O</a> )
<a name="l00272"></a>00272     letter_index[1] ++;
<a name="l00273"></a>00273 
<a name="l00274"></a>00274   <span class="comment">/* Get 15 minute quadrant value, 1-4 */</span>
<a name="l00275"></a>00275   strcpy( _15_minute_value_str, _15_minute_array[horiz_index_15][vert_index_15] );
<a name="l00276"></a>00276 
<a name="l00277"></a>00277   <span class="comment">/* Get 5 minute keypad value, 1-9 */</span>
<a name="l00278"></a>00278   strcpy( _5_minute_value_str, _5_minute_array[horiz_index_5][vert_index_5] );
<a name="l00279"></a>00279 
<a name="l00280"></a>00280   <span class="comment">/* Form the gars string */</span>
<a name="l00281"></a>00281   <span class="keywordflow">if</span>( ew_value &lt; 10 )
<a name="l00282"></a>00282     sprintf ( GARSString, <span class="stringliteral">&quot;00%d%c%c&quot;</span>, ew_value, ( <span class="keywordtype">char</span> )( letter_index[0] + <a class="code" href="_g_a_r_s_8cpp.html#af892c7c4c45ed2ef9293868b85f962d6">LETTER_A_OFFSET</a> ), ( <span class="keywordtype">char</span> )( letter_index[1] + <a class="code" href="_g_a_r_s_8cpp.html#af892c7c4c45ed2ef9293868b85f962d6">LETTER_A_OFFSET</a> ) );
<a name="l00283"></a>00283   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ew_value &lt; 100 )
<a name="l00284"></a>00284     sprintf ( GARSString, <span class="stringliteral">&quot;0%d%c%c&quot;</span>, ew_value, ( <span class="keywordtype">char</span> )( letter_index[0] + <a class="code" href="_g_a_r_s_8cpp.html#af892c7c4c45ed2ef9293868b85f962d6">LETTER_A_OFFSET</a> ), ( <span class="keywordtype">char</span> )( letter_index[1] + <a class="code" href="_g_a_r_s_8cpp.html#af892c7c4c45ed2ef9293868b85f962d6">LETTER_A_OFFSET</a> ) );
<a name="l00285"></a>00285   <span class="keywordflow">else</span>
<a name="l00286"></a>00286     sprintf ( GARSString, <span class="stringliteral">&quot;%d%c%c&quot;</span>, ew_value, ( <span class="keywordtype">char</span> )( letter_index[0] + <a class="code" href="_g_a_r_s_8cpp.html#af892c7c4c45ed2ef9293868b85f962d6">LETTER_A_OFFSET</a> ), ( <span class="keywordtype">char</span> )( letter_index[1] + <a class="code" href="_g_a_r_s_8cpp.html#af892c7c4c45ed2ef9293868b85f962d6">LETTER_A_OFFSET</a> ) );
<a name="l00287"></a>00287 
<a name="l00288"></a>00288   <span class="keywordflow">if</span>( precision &gt; 0 )
<a name="l00289"></a>00289   {
<a name="l00290"></a>00290     strcat( GARSString, _15_minute_value_str);
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     <span class="keywordflow">if</span>( precision &gt; 1 )
<a name="l00293"></a>00293       strcat( GARSString, _5_minute_value_str);
<a name="l00294"></a>00294   }
<a name="l00295"></a>00295 
<a name="l00296"></a>00296   GARSString[7] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l00297"></a>00297 
<a name="l00298"></a>00298   <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s_coordinates.html">GARSCoordinates</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_type.html#a418b669819e988d0cb43c506beffd8ebaa1dfd78c3a7a85d11881c6e870c1a0fa">CoordinateType::globalAreaReferenceSystem</a>, GARSString );
<a name="l00299"></a>00299 }
<a name="l00300"></a>00300 
<a name="l00301"></a>00301 
<a name="l00302"></a><a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html#ac734ad07d7dc93ef875a90f43e88ef5f">00302</a> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_geodetic_coordinates.html">MSP::CCS::GeodeticCoordinates</a>* <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s.html#ac734ad07d7dc93ef875a90f43e88ef5f">GARS::convertToGeodetic</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s_coordinates.html">MSP::CCS::GARSCoordinates</a>* garsCoordinates )
<a name="l00303"></a>00303 {
<a name="l00304"></a>00304 <span class="comment">/*</span>
<a name="l00305"></a>00305 <span class="comment"> *  The function convertToGeodetic converts a GARS coordinate string to Geodetic (latitude</span>
<a name="l00306"></a>00306 <span class="comment"> *  and longitude in radians) coordinates.</span>
<a name="l00307"></a>00307 <span class="comment"> *</span>
<a name="l00308"></a>00308 <span class="comment"> *    GARSString  : GARS coordinate string.     (input)</span>
<a name="l00309"></a>00309 <span class="comment"> *    longitude   : Longitude in radians.       (output)</span>
<a name="l00310"></a>00310 <span class="comment"> *    latitude    : Latitude in radians.        (output)</span>
<a name="l00311"></a>00311 <span class="comment"> *</span>
<a name="l00312"></a>00312 <span class="comment"> */</span>
<a name="l00313"></a>00313 
<a name="l00314"></a>00314   <span class="keywordtype">long</span> gars_length;          <span class="comment">/* length of GARS string                      */</span>
<a name="l00315"></a>00315   <span class="keywordtype">int</span> index = 0;
<a name="l00316"></a>00316   <span class="keywordtype">char</span> ew_str[4];
<a name="l00317"></a>00317   <span class="keywordtype">int</span> ew_value = 0;
<a name="l00318"></a>00318   <span class="keywordtype">char</span> letter = <span class="charliteral">&apos; &apos;</span>;
<a name="l00319"></a>00319   <span class="keywordtype">int</span> ns_str[3];
<a name="l00320"></a>00320   <span class="keywordtype">char</span> _15_minute_value = 0;
<a name="l00321"></a>00321   <span class="keywordtype">char</span> _5_minute_value = 0;
<a name="l00322"></a>00322   <span class="keywordtype">double</span> lat_minutes = 0;
<a name="l00323"></a>00323   <span class="keywordtype">double</span> lon_minutes = 0;
<a name="l00324"></a>00324   <span class="keywordtype">double</span> longitude, latitude;
<a name="l00325"></a>00325 
<a name="l00326"></a>00326   <span class="keywordtype">char</span>* GARSString = garsCoordinates-&gt;<a class="code" href="class_m_s_p_1_1_c_c_s_1_1_g_a_r_s_coordinates.html#ab9f534f76158772ff411dcad6db1dcb6">GARSString</a>();
<a name="l00327"></a>00327 
<a name="l00328"></a>00328   gars_length = strlen( GARSString );
<a name="l00329"></a>00329   <span class="keywordflow">if</span> ( ( gars_length &lt; <a class="code" href="_g_a_r_s_8cpp.html#a550c1aea012e1bd3e6d86d519f0f9c37">GARS_MINIMUM</a> ) || ( gars_length &gt; <a class="code" href="_g_a_r_s_8cpp.html#ae1d4b4c4a641820dc8f66e08b74f7e18">GARS_MAXIMUM</a> ) )
<a name="l00330"></a>00330     <span class="keywordflow">throw</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_conversion_exception.html">CoordinateConversionException</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_error_messages.html#adbc55e00667bf9bd0a9d01741ab7c8d5">ErrorMessages::garsString</a> );
<a name="l00331"></a>00331 
<a name="l00332"></a>00332   <span class="keywordflow">while</span>( isdigit( GARSString[index] ) )
<a name="l00333"></a>00333   {
<a name="l00334"></a>00334   ew_str[index] = GARSString[index];
<a name="l00335"></a>00335   index++;
<a name="l00336"></a>00336   }
<a name="l00337"></a>00337 
<a name="l00338"></a>00338   <span class="keywordflow">if</span>( index != 3 )
<a name="l00339"></a>00339   <span class="keywordflow">throw</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_conversion_exception.html">CoordinateConversionException</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_error_messages.html#adbc55e00667bf9bd0a9d01741ab7c8d5">ErrorMessages::garsString</a> );
<a name="l00340"></a>00340 
<a name="l00341"></a>00341   <span class="comment">/* Get 30 minute east/west value, 1-720 */</span>
<a name="l00342"></a>00342   ew_value = atoi( ew_str );
<a name="l00343"></a>00343 
<a name="l00344"></a>00344   letter = GARSString[index];
<a name="l00345"></a>00345   <span class="keywordflow">if</span>( !isalpha( letter ) )
<a name="l00346"></a>00346   <span class="keywordflow">throw</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_conversion_exception.html">CoordinateConversionException</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_error_messages.html#a148e03a19b3a95cae62e48e757245d12">ErrorMessages::longitude</a> );
<a name="l00347"></a>00347 
<a name="l00348"></a>00348   <span class="comment">/* Get first 30 minute north/south letter, A-Q */</span>
<a name="l00349"></a>00349   ns_str[0] = toupper( letter ) - <a class="code" href="_g_a_r_s_8cpp.html#af892c7c4c45ed2ef9293868b85f962d6">LETTER_A_OFFSET</a>;
<a name="l00350"></a>00350   letter = GARSString[++index];
<a name="l00351"></a>00351   <span class="keywordflow">if</span>( !isalpha( letter ) )
<a name="l00352"></a>00352   <span class="keywordflow">throw</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_conversion_exception.html">CoordinateConversionException</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_error_messages.html#a7b9a89219866d2577632c4a2a29f21a7">ErrorMessages::latitude</a> );
<a name="l00353"></a>00353 
<a name="l00354"></a>00354   <span class="comment">/* Get second 30 minute north/south letter, A-Z */</span>
<a name="l00355"></a>00355   ns_str[1] = toupper( letter ) - <a class="code" href="_g_a_r_s_8cpp.html#af892c7c4c45ed2ef9293868b85f962d6">LETTER_A_OFFSET</a>;
<a name="l00356"></a>00356 
<a name="l00357"></a>00357   <span class="keywordflow">if</span>( index + 1 &lt; gars_length )
<a name="l00358"></a>00358   {
<a name="l00359"></a>00359     <span class="comment">/* Get 15 minute quadrant value, 1-4 */</span>
<a name="l00360"></a>00360     _15_minute_value = GARSString[++index];
<a name="l00361"></a>00361     <span class="keywordflow">if</span>( !isdigit( _15_minute_value ) || _15_minute_value &lt; _1 || _15_minute_value &gt; <a class="code" href="_g_a_r_s_8cpp.html#adeb73c37cec3f75c23f05347c27892d1">_4</a> )
<a name="l00362"></a>00362       <span class="keywordflow">throw</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_conversion_exception.html">CoordinateConversionException</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_error_messages.html#a12fe91de236b59387b032ee4710c0f5d">ErrorMessages::longitude_min</a> );
<a name="l00363"></a>00363     <span class="keywordflow">else</span>
<a name="l00364"></a>00364     {
<a name="l00365"></a>00365       <span class="keywordflow">if</span>( index + 1 &lt; gars_length )
<a name="l00366"></a>00366       {
<a name="l00367"></a>00367         <span class="comment">/* Get 5 minute quadrant value, 1-9 */</span>
<a name="l00368"></a>00368         _5_minute_value = GARSString[++index];
<a name="l00369"></a>00369         <span class="keywordflow">if</span>( !isdigit( _5_minute_value ) || _5_minute_value &lt; _1 || _5_minute_value &gt; <a class="code" href="_g_a_r_s_8cpp.html#ab7ad91f8bcde6b3499ece302740b41c9">_9</a> )
<a name="l00370"></a>00370           <span class="keywordflow">throw</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_conversion_exception.html">CoordinateConversionException</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_error_messages.html#a6a85efa0ca7a5bdf53ed60137f490ca4">ErrorMessages::latitude_min</a> );
<a name="l00371"></a>00371       }
<a name="l00372"></a>00372     }
<a name="l00373"></a>00373   }
<a name="l00374"></a>00374 
<a name="l00375"></a>00375   longitude = ( ( ( ew_value - 1.0 ) / 2.0 ) - 180.0 );
<a name="l00376"></a>00376 
<a name="l00377"></a>00377   <span class="comment">/* Letter I and O are invalid */</span>
<a name="l00378"></a>00378   <span class="keywordflow">if</span>( ns_str[0] &gt;= <a class="code" href="_g_a_r_s_8cpp.html#af18719d61a90a5d93e5a92179db37e78">LETTER_O</a> )
<a name="l00379"></a>00379     ns_str[0] --;
<a name="l00380"></a>00380   <span class="keywordflow">if</span>( ns_str[0] &gt;= <a class="code" href="_g_a_r_s_8cpp.html#a69620a4a38aeb0b7a2f42a5a372e5cd3">LETTER_I</a> ) 
<a name="l00381"></a>00381     ns_str[0] --;
<a name="l00382"></a>00382 
<a name="l00383"></a>00383   <span class="keywordflow">if</span>( ns_str[1] &gt;= <a class="code" href="_g_a_r_s_8cpp.html#af18719d61a90a5d93e5a92179db37e78">LETTER_O</a> )
<a name="l00384"></a>00384     ns_str[1] --;
<a name="l00385"></a>00385   <span class="keywordflow">if</span>( ns_str[1] &gt;= <a class="code" href="_g_a_r_s_8cpp.html#a69620a4a38aeb0b7a2f42a5a372e5cd3">LETTER_I</a> )
<a name="l00386"></a>00386     ns_str[1] --;
<a name="l00387"></a>00387 
<a name="l00388"></a>00388   latitude = ( ( -90.0 + ( ns_str[0] * 12.0 ) ) + ( ns_str[1] / 2.0 ) );
<a name="l00389"></a>00389 
<a name="l00390"></a>00390   <span class="keywordflow">switch</span>( _15_minute_value )
<a name="l00391"></a>00391   {
<a name="l00392"></a>00392     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#ae4138a60787d5efe013e6e6cfb8892de">_1</a>:
<a name="l00393"></a>00393       lat_minutes = 15.0;
<a name="l00394"></a>00394       <span class="keywordflow">break</span>;
<a name="l00395"></a>00395     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#adeb73c37cec3f75c23f05347c27892d1">_4</a>:
<a name="l00396"></a>00396       lon_minutes = 15.0;
<a name="l00397"></a>00397       <span class="keywordflow">break</span>;
<a name="l00398"></a>00398     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#a1effac125b74d6ff5f233ced9fd7d3e9">_2</a>:
<a name="l00399"></a>00399       lat_minutes = 15.0;
<a name="l00400"></a>00400       lon_minutes = 15.0;
<a name="l00401"></a>00401       <span class="keywordflow">break</span>;
<a name="l00402"></a>00402     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#ae077994efbced68710326beae00fc2a8">_3</a>:
<a name="l00403"></a>00403     <span class="keywordflow">default</span>:
<a name="l00404"></a>00404       <span class="keywordflow">break</span>;
<a name="l00405"></a>00405   }
<a name="l00406"></a>00406 
<a name="l00407"></a>00407   <span class="keywordflow">switch</span>( _5_minute_value )
<a name="l00408"></a>00408   {
<a name="l00409"></a>00409     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#adeb73c37cec3f75c23f05347c27892d1">_4</a>:
<a name="l00410"></a>00410       lat_minutes += 5.0;
<a name="l00411"></a>00411       <span class="keywordflow">break</span>;
<a name="l00412"></a>00412     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#ae4138a60787d5efe013e6e6cfb8892de">_1</a>:
<a name="l00413"></a>00413       lat_minutes += 10.0;
<a name="l00414"></a>00414       <span class="keywordflow">break</span>;
<a name="l00415"></a>00415     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#a858d1f5b03daab914d4f197d34443b55">_8</a>:
<a name="l00416"></a>00416       lon_minutes += 5.0;
<a name="l00417"></a>00417       <span class="keywordflow">break</span>;
<a name="l00418"></a>00418     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#a3c63916e510b8132e5f85701b72ca6c4">_5</a>:
<a name="l00419"></a>00419       lon_minutes += 5.0;
<a name="l00420"></a>00420       lat_minutes += 5.0;
<a name="l00421"></a>00421       <span class="keywordflow">break</span>;
<a name="l00422"></a>00422     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#a1effac125b74d6ff5f233ced9fd7d3e9">_2</a>:
<a name="l00423"></a>00423       lon_minutes += 5.0;
<a name="l00424"></a>00424       lat_minutes += 10.0;
<a name="l00425"></a>00425       <span class="keywordflow">break</span>;
<a name="l00426"></a>00426     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#ab7ad91f8bcde6b3499ece302740b41c9">_9</a>:
<a name="l00427"></a>00427       lon_minutes += 10.0;
<a name="l00428"></a>00428       <span class="keywordflow">break</span>;
<a name="l00429"></a>00429     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#a01f366355c9f897d3db7995c1cd2ebde">_6</a>:
<a name="l00430"></a>00430       lon_minutes += 10.0;
<a name="l00431"></a>00431       lat_minutes += 5.0;
<a name="l00432"></a>00432       <span class="keywordflow">break</span>;
<a name="l00433"></a>00433     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#ae077994efbced68710326beae00fc2a8">_3</a>:
<a name="l00434"></a>00434       lon_minutes += 10.0;
<a name="l00435"></a>00435       lat_minutes += 10.0;
<a name="l00436"></a>00436       <span class="keywordflow">break</span>;
<a name="l00437"></a>00437     <span class="keywordflow">case</span> <a class="code" href="_g_a_r_s_8cpp.html#aa78fc0e444206c5b9e27bc3a3816cd29">_7</a>:
<a name="l00438"></a>00438     <span class="keywordflow">default</span>:
<a name="l00439"></a>00439       <span class="keywordflow">break</span>;
<a name="l00440"></a>00440   }
<a name="l00441"></a>00441 
<a name="l00442"></a>00442   <span class="comment">/* Add these values to force the reference point to be the center of the box */</span>
<a name="l00443"></a>00443   <span class="keywordflow">if</span>( _5_minute_value )
<a name="l00444"></a>00444   {
<a name="l00445"></a>00445     lat_minutes += 2.5;
<a name="l00446"></a>00446     lon_minutes += 2.5;
<a name="l00447"></a>00447   }
<a name="l00448"></a>00448   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( _15_minute_value )
<a name="l00449"></a>00449   {
<a name="l00450"></a>00450     lat_minutes += 7.5;
<a name="l00451"></a>00451     lon_minutes += 7.5;
<a name="l00452"></a>00452   }
<a name="l00453"></a>00453   <span class="keywordflow">else</span>
<a name="l00454"></a>00454   {
<a name="l00455"></a>00455     lat_minutes += 15.0;
<a name="l00456"></a>00456     lon_minutes += 15.0;
<a name="l00457"></a>00457   }
<a name="l00458"></a>00458 
<a name="l00459"></a>00459   latitude += lat_minutes / <a class="code" href="_g_a_r_s_8cpp.html#a5e5c792059a69de684432bb2b07ac9ae">MIN_PER_DEG</a>;
<a name="l00460"></a>00460   longitude += lon_minutes / <a class="code" href="_g_a_r_s_8cpp.html#a5e5c792059a69de684432bb2b07ac9ae">MIN_PER_DEG</a>;
<a name="l00461"></a>00461   longitude *= <a class="code" href="_datum_library_implementation_8cpp.html#a99168053ae79aafdba6055129c5bb256">PI_OVER_180</a>;
<a name="l00462"></a>00462   latitude *= <a class="code" href="_datum_library_implementation_8cpp.html#a99168053ae79aafdba6055129c5bb256">PI_OVER_180</a>;
<a name="l00463"></a>00463 
<a name="l00464"></a>00464   <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_geodetic_coordinates.html">GeodeticCoordinates</a>( <a class="code" href="class_m_s_p_1_1_c_c_s_1_1_coordinate_type.html#a418b669819e988d0cb43c506beffd8eba49202f41636b7629fc9431e8d1b448d4">CoordinateType::geodetic</a>, longitude, latitude );
<a name="l00465"></a>00465 }
<a name="l00466"></a>00466 
<a name="l00467"></a>00467 
<a name="l00468"></a>00468 
<a name="l00469"></a>00469 <span class="comment">// CLASSIFICATION: UNCLASSIFIED</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Aug 3 10:29:07 2010 for MSP GEOTRANS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
